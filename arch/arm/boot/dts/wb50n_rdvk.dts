/*
 * wb50n.dts - Device Tree file for wb50n board
 *
 *  Copyright (C) 2015 Laird
 *
 * Licensed under GPLv2 or later.
 */

/dts-v1/;
#include "wb50n.dtsi"

/ {
	ahb {
		apb {
			pinctrl@fffff200 {
				board {
					pinctrl_wlan_wl8xx: wlan_wl18xx {
						atmel,pins =
							<AT91_PIOA 31 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_DOWN /* WLAN-EN */
							 AT91_PIOA 14 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_DOWN /* INT */
							 AT91_PIOA 30 AT91_PERIPH_GPIO AT91_PINCTRL_PULL_DOWN>; /* BT-EN */
					};
				};
			};

			mmc0: mmc@f0000000 {
				pinctrl-0 = <&pinctrl_mmc0_clk_cmd_dat0 &pinctrl_mmc0_dat1_3 &pinctrl_mmc0_cd &pinctrl_wlan_wl8xx>;
				keep-power-in-suspend;
				status = "okay";
				autosuspend-delay = <1000>;

				wlcore: wlcore@2 {
					compatible = "ti,wl1835";
					reg = <2>;
					interrupt-parent = <&pioA>;
					interrupts = <14 IRQ_TYPE_EDGE_RISING>;
				};
			};

			macb1: ethernet@f802c000 {
				status = "okay";
			};

			dbgu: serial@ffffee00 {
				status = "okay";
			};

			/* On BB40 this port is labeled UART1 */
			usart0: serial@f001c000 {
				status = "okay";
			};

			/* On BB40 this port is labeled UART0 */
			usart1: serial@f0020000 {
				status = "okay";
			};

			spi1: spi@f8008000 {
				cs-gpios = <&pioC 25 0>, <0>, <0>, <0>;
				status = "okay";

				spidev@0 {
					compatible = "spidev";
					reg = <0>;
					spi-max-frequency = <8000000>;
				 };
			};

			watchdog@fffffe40 {
				status = "okay";
			};
		};

		usb0: gadget@00500000 {
			status = "okay";
		};

		usb1: ohci@00600000 {
			status = "okay";
		};

		usb2: ehci@00700000 {
			status = "okay";
		};
	};

	gpio_keys {
		compatible = "gpio-keys";
		#address-cells = <1>;
		#size-cells = <0>;
		btn0@pa10 {
			label = "BTNESC";
			linux,code = <1>; /* ESC button */
			gpios = <&pioA 10 GPIO_ACTIVE_LOW>;
			gpio-key,wakeup = <1>;
		};

		irqbtn@pe31 {
			label = "IRQBTN";
			linux,code = <99>; /* SysReq button */
			gpios = <&pioE 31 GPIO_ACTIVE_LOW>;
			gpio-key,wakeup = <1>;
		};
	};
};
